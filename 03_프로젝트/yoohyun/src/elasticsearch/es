{
  "size": 0,
  "query": {
    "bool": {
      "must": [
        {
          "range": {
            "@timestamp": {
              "gte": "2023-07-16T04:46:21.835Z",
              "lte": "2023-07-16T05:01:21.835Z",
              "format": "strict_date_optional_time"
            }
          }
        }
      ],
      "filter": [],
      "should": [],
      "must_not": []
    }
  },
  "aggs": {
    "timeseries": {
      "date_histogram": {
        "field": "@timestamp",
        "min_doc_count": 0,
        "time_zone": "Asia/Seoul",
        "extended_bounds": {
          "min": 1689482781835,
          "max": 1689483681835
        },
        "fixed_interval": "10s"
      },
      "aggs": {
        "4c9e2552-1b91-11e7-bec4-a5e9ec5cab8b": {
          "avg": {
            "field": "system.cpu.user.pct"
          }
        },
        "225c2140-5fd7-11e7-a63a-a937b7c1a7e1": {
          "avg": {
            "field": "system.cpu.system.pct"
          }
        },
        "837a30c0-5fd7-11e7-a63a-a937b7c1a7e1": {
          "avg": {
            "field": "system.cpu.cores"
          }
        },
        "587aa510-1b91-11e7-bec4-a5e9ec5cab8b": {
          "bucket_script": {
            "buckets_path": {
              "user": "4c9e2552-1b91-11e7-bec4-a5e9ec5cab8b",
              "system": "225c2140-5fd7-11e7-a63a-a937b7c1a7e1",
              "n": "837a30c0-5fd7-11e7-a63a-a937b7c1a7e1"
            },
            "script": {
              "source": "params.n > 0 ? (params.user+params.system)/params.n : null",
              "lang": "painless",
              "params": {
                "_interval": 10000
              }
            },
            "gap_policy": "skip"
          }
        }
      },
      "meta": {
        "timeField": "@timestamp",
        "panelId": "4c9e2550-1b91-11e7-bec4-a5e9ec5cab8b",
        "seriesId": "4c9e2551-1b91-11e7-bec4-a5e9ec5cab8b",
        "intervalString": "10s",
        "indexPatternString": "metricbeat-*",
        "normalized": true
      }
    }
  },
  "runtime_mappings": {},
  "timeout": "30000ms"
}